<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Games202-lecture3-实时阴影和PCSS介绍</title>
    <link href="/2025/03/20/Games202-Lecture3/"/>
    <url>/2025/03/20/Games202-Lecture3/</url>
    
    <content type="html"><![CDATA[<h1 id="Games202-Lecture-3-Realtime-Shadow-1"><a href="#Games202-Lecture-3-Realtime-Shadow-1" class="headerlink" title="Games202 Lecture 3: Realtime Shadow 1"></a>Games202 Lecture 3: Realtime Shadow 1</h1><p>这一节闫老师讲了关于实时阴影的内容，并简要介绍了PCSS的实现原理</p><h2 id="大纲"><a href="#大纲" class="headerlink" title="大纲"></a>大纲</h2><img src="/2025/03/20/Games202-Lecture3/image1.png" class=""><hr><h2 id="Shadow-Mapping"><a href="#Shadow-Mapping" class="headerlink" title="Shadow Mapping"></a>Shadow Mapping</h2><h3 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h3><img src="/2025/03/20/Games202-Lecture3/image2.png" class=""><hr><h3 id="Pass1-从光源渲染一个深度"><a href="#Pass1-从光源渲染一个深度" class="headerlink" title="Pass1: 从光源渲染一个深度"></a>Pass1: 从光源渲染一个深度</h3><img src="/2025/03/20/Games202-Lecture3/image3.png" class=""><hr><h3 id="Pass2-从相机渲染，然后把渲染点投影到Shadow-Map比较深度"><a href="#Pass2-从相机渲染，然后把渲染点投影到Shadow-Map比较深度" class="headerlink" title="Pass2: 从相机渲染，然后把渲染点投影到Shadow Map比较深度"></a>Pass2: 从相机渲染，然后把渲染点投影到Shadow Map比较深度</h3><img src="/2025/03/20/Games202-Lecture3/image4.png" class=""><hr><h2 id="Shadow-Mapping的一些问题"><a href="#Shadow-Mapping的一些问题" class="headerlink" title="Shadow Mapping的一些问题"></a>Shadow Mapping的一些问题</h2><h3 id="自遮挡问题"><a href="#自遮挡问题" class="headerlink" title="自遮挡问题"></a>自遮挡问题</h3><p>相机相当于把地面离散化为垂直于相机的小块，相机越平行于地面越严重。</p><img src="/2025/03/20/Games202-Lecture3/image5.png" class=""><img src="/2025/03/20/Games202-Lecture3/image6.png" class=""><img src="/2025/03/20/Games202-Lecture3/image7.png" class=""><img src="/2025/03/20/Games202-Lecture3/image8.png" class=""><hr><h3 id="走样的问题：锯齿"><a href="#走样的问题：锯齿" class="headerlink" title="走样的问题：锯齿"></a>走样的问题：锯齿</h3><img src="/2025/03/20/Games202-Lecture3/image9.png" class=""><hr><h2 id="Shadow-Mapping中的数学：从渲染方程解释"><a href="#Shadow-Mapping中的数学：从渲染方程解释" class="headerlink" title="Shadow Mapping中的数学：从渲染方程解释"></a>Shadow Mapping中的数学：从渲染方程解释</h2><h3 id="不等式"><a href="#不等式" class="headerlink" title="不等式"></a>不等式</h3><img src="/2025/03/20/Games202-Lecture3/image10.png" class=""><hr><h3 id="实时渲染把不等式看作是约等式"><a href="#实时渲染把不等式看作是约等式" class="headerlink" title="实时渲染把不等式看作是约等式"></a>实时渲染把不等式看作是约等式</h3><p>一个重要的约等式（SplitSum和RSM都有用到）。</p><img src="/2025/03/20/Games202-Lecture3/image11.png" class=""><hr><h3 id="Rendering-Equation上可以把V项给拆出来"><a href="#Rendering-Equation上可以把V项给拆出来" class="headerlink" title="Rendering Equation上可以把V项给拆出来"></a>Rendering Equation上可以把V项给拆出来</h3><p>相当于先做Shading，再乘以一个Shadow因子。</p><img src="/2025/03/20/Games202-Lecture3/image12.png" class=""><hr><h3 id="什么情况下拆分是比较准的"><a href="#什么情况下拆分是比较准的" class="headerlink" title="什么情况下拆分是比较准的"></a>什么情况下拆分是比较准的</h3><p>基本上就是Glossy BRDF下的面光源不准。</p><img src="/2025/03/20/Games202-Lecture3/image13.png" class=""><hr><h2 id="Percentage-Closer-Soft-Shadows-PCSS"><a href="#Percentage-Closer-Soft-Shadows-PCSS" class="headerlink" title="Percentage Closer Soft Shadows (PCSS)"></a>Percentage Closer Soft Shadows (PCSS)</h2><h3 id="Percentage-Closer-Filtering-PCF"><a href="#Percentage-Closer-Filtering-PCF" class="headerlink" title="Percentage Closer Filtering (PCF)"></a>Percentage Closer Filtering (PCF)</h3><p>最开始就是做抗锯齿的。</p><p><strong>做法</strong>：在Shadow Map上对应点附近7x7比较深度后再做平均值（所有结果都是0或者1的）。</p><img src="/2025/03/20/Games202-Lecture3/image14.png" class=""><p><strong>效果</strong>：没有锯齿，还有类似软阴影的效果。</p><img src="/2025/03/20/Games202-Lecture3/image15.png" class=""><hr><h3 id="PCSS分析"><a href="#PCSS分析" class="headerlink" title="PCSS分析"></a>PCSS分析</h3><p>发现：软阴影和硬阴影是跟笔尖和纸的距离有关。</p><img src="/2025/03/20/Games202-Lecture3/image16.png" class=""><hr><h3 id="PCSS分析：不同遮挡物距离需要的Filter核的大小关系"><a href="#PCSS分析：不同遮挡物距离需要的Filter核的大小关系" class="headerlink" title="PCSS分析：不同遮挡物距离需要的Filter核的大小关系"></a>PCSS分析：不同遮挡物距离需要的Filter核的大小关系</h3><p>貌似我们找的depth应该是黄色的那个线，而不应该是蓝绿线。</p><img src="/2025/03/20/Games202-Lecture3/image17.png" class=""><hr><h3 id="PCSS算法"><a href="#PCSS算法" class="headerlink" title="PCSS算法"></a>PCSS算法</h3><ol><li>第一步是通过ShadowMap计算遮挡物的平均深度（遮挡物的判断需要用深度比较一下）。</li><li>第二步计算Filter Size。</li><li>第三步就是PCF（面光源的ShadowMap是由面光源的中心生成的）。</li></ol><img src="/2025/03/20/Games202-Lecture3/image18.png" class=""><hr><h3 id="PCSS算法：解释如何第一步找Blocker平均Depth大小"><a href="#PCSS算法：解释如何第一步找Blocker平均Depth大小" class="headerlink" title="PCSS算法：解释如何第一步找Blocker平均Depth大小"></a>PCSS算法：解释如何第一步找Blocker平均Depth大小</h3><p>这个是启发式的（用ShadingPoint往面光源连线，取相交于ShadowMap的区域来计算遮挡物的平均深度）；另外还可以用固定的5x5大小来找。</p><img src="/2025/03/20/Games202-Lecture3/image19.png" class="">]]></content>
    
    
    <categories>
      
      <category>Computer Graphics</category>
      
      <category>Games 202</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Shadow</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Games202-lecture5-软阴影和SplitSum介绍</title>
    <link href="/2025/03/20/Games202-lecture5/"/>
    <url>/2025/03/20/Games202-lecture5/</url>
    
    <content type="html"><![CDATA[<h1 id="Games202-Lecture5-Real-time-Environment-mapping"><a href="#Games202-Lecture5-Real-time-Environment-mapping" class="headerlink" title="Games202-Lecture5-Real-time Environment mapping"></a>Games202-Lecture5-Real-time Environment mapping</h1><p>这一节闫老师主要介绍了使用SDF做软阴影效果的实现，然后再介绍了环境光的镜面反射部分的Split Sum的数学原理</p><h2 id="Distance-Field-Soft-Shadows"><a href="#Distance-Field-Soft-Shadows" class="headerlink" title="Distance Field Soft Shadows"></a>Distance Field Soft Shadows</h2><h3 id="软阴影效果"><a href="#软阴影效果" class="headerlink" title="软阴影效果"></a>软阴影效果</h3><img src="/2025/03/20/Games202-lecture5/image1.png" class=""><h3 id="Distance-Functions-定义空间一点到所有物体最近的距离"><a href="#Distance-Functions-定义空间一点到所有物体最近的距离" class="headerlink" title="Distance Functions: 定义空间一点到所有物体最近的距离"></a>Distance Functions: 定义空间一点到所有物体最近的距离</h3><img src="/2025/03/20/Games202-lecture5/image2.png" class=""><h3 id="对于物体移动的情况下，SDF插值比图像插值得到的效果表示物体边界的效果更准确"><a href="#对于物体移动的情况下，SDF插值比图像插值得到的效果表示物体边界的效果更准确" class="headerlink" title="对于物体移动的情况下，SDF插值比图像插值得到的效果表示物体边界的效果更准确"></a>对于物体移动的情况下，SDF插值比图像插值得到的效果表示物体边界的效果更准确</h3><img src="/2025/03/20/Games202-lecture5/image3.png" class=""><h3 id="SDF的作用1：用来做RayMarching步进。相当于空间一点可以走至少SDF的距离，这样可以走的快一点（如果sdf都很小咋办，比如一个很狭窄的过道那种？）"><a href="#SDF的作用1：用来做RayMarching步进。相当于空间一点可以走至少SDF的距离，这样可以走的快一点（如果sdf都很小咋办，比如一个很狭窄的过道那种？）" class="headerlink" title="SDF的作用1：用来做RayMarching步进。相当于空间一点可以走至少SDF的距离，这样可以走的快一点（如果sdf都很小咋办，比如一个很狭窄的过道那种？）"></a>SDF的作用1：用来做RayMarching步进。相当于空间一点可以走至少SDF的距离，这样可以走的快一点（如果sdf都很小咋办，比如一个很狭窄的过道那种？）</h3><img src="/2025/03/20/Games202-lecture5/image4.png" class=""><h3 id="SDF的作用2：用来做软阴影。相当于找到Shading-Point射线方向最小的SDF值，可以算出一个安全角度，如果角度越小，则越容易遮挡"><a href="#SDF的作用2：用来做软阴影。相当于找到Shading-Point射线方向最小的SDF值，可以算出一个安全角度，如果角度越小，则越容易遮挡" class="headerlink" title="SDF的作用2：用来做软阴影。相当于找到Shading Point射线方向最小的SDF值，可以算出一个安全角度，如果角度越小，则越容易遮挡"></a>SDF的作用2：用来做软阴影。相当于找到Shading Point射线方向最小的SDF值，可以算出一个安全角度，如果角度越小，则越容易遮挡</h3><img src="/2025/03/20/Games202-lecture5/image5.png" class=""><img src="/2025/03/20/Games202-lecture5/image6.png" class=""><h3 id="SDF的缺点：需要预计算，储存需要3维量大"><a href="#SDF的缺点：需要预计算，储存需要3维量大" class="headerlink" title="SDF的缺点：需要预计算，储存需要3维量大"></a>SDF的缺点：需要预计算，储存需要3维量大</h3><img src="/2025/03/20/Games202-lecture5/image7.png" class=""><h2 id="环境光着色（Environment-Lighting），这里主要讨论的是镜面反射"><a href="#环境光着色（Environment-Lighting），这里主要讨论的是镜面反射" class="headerlink" title="环境光着色（Environment Lighting），这里主要讨论的是镜面反射"></a>环境光着色（Environment Lighting），这里主要讨论的是镜面反射</h2><h3 id="假设环境光无限远"><a href="#假设环境光无限远" class="headerlink" title="假设环境光无限远"></a>假设环境光无限远</h3><img src="/2025/03/20/Games202-lecture5/image8.png" class=""><h3 id="思路，不考虑遮挡的情况（后面可能用AO来补偿一下）"><a href="#思路，不考虑遮挡的情况（后面可能用AO来补偿一下）" class="headerlink" title="思路，不考虑遮挡的情况（后面可能用AO来补偿一下）"></a>思路，不考虑遮挡的情况（后面可能用AO来补偿一下）</h3><img src="/2025/03/20/Games202-lecture5/image9.png" class=""><h3 id="近似拆分：黄框相当于是对环境光模糊，然后可以放到mipmap中；黄框右边就是对BRDF的Cos积分"><a href="#近似拆分：黄框相当于是对环境光模糊，然后可以放到mipmap中；黄框右边就是对BRDF的Cos积分" class="headerlink" title="近似拆分：黄框相当于是对环境光模糊，然后可以放到mipmap中；黄框右边就是对BRDF的Cos积分"></a>近似拆分：黄框相当于是对环境光模糊，然后可以放到mipmap中；黄框右边就是对BRDF的Cos积分</h3><img src="/2025/03/20/Games202-lecture5/image10.png" class=""><h3 id="预计算BRDF项：红框部分"><a href="#预计算BRDF项：红框部分" class="headerlink" title="预计算BRDF项：红框部分"></a>预计算BRDF项：红框部分</h3><img src="/2025/03/20/Games202-lecture5/image11.png" class=""><h3 id="微表面模型的BRDF分了菲涅尔项、几何遮挡、法线分布三部分"><a href="#微表面模型的BRDF分了菲涅尔项、几何遮挡、法线分布三部分" class="headerlink" title="微表面模型的BRDF分了菲涅尔项、几何遮挡、法线分布三部分"></a>微表面模型的BRDF分了菲涅尔项、几何遮挡、法线分布三部分</h3><img src="/2025/03/20/Games202-lecture5/image12.png" class=""><h3 id="菲涅尔项和NDF项，（G项这里可能没有考虑）"><a href="#菲涅尔项和NDF项，（G项这里可能没有考虑）" class="headerlink" title="菲涅尔项和NDF项，（G项这里可能没有考虑）"></a>菲涅尔项和NDF项，（G项这里可能没有考虑）</h3><img src="/2025/03/20/Games202-lecture5/image13.png" class=""><h3 id="SplitSum来源：为了简化，把R0拆分处理来（R0貌似是直接用基色？貌似unity绝缘体直接用的0-04xBaseColor，导体是0-96xBaseColor）"><a href="#SplitSum来源：为了简化，把R0拆分处理来（R0貌似是直接用基色？貌似unity绝缘体直接用的0-04xBaseColor，导体是0-96xBaseColor）" class="headerlink" title="SplitSum来源：为了简化，把R0拆分处理来（R0貌似是直接用基色？貌似unity绝缘体直接用的0.04xBaseColor，导体是0.96xBaseColor）"></a>SplitSum来源：为了简化，把R0拆分处理来（R0貌似是直接用基色？貌似unity绝缘体直接用的0.04xBaseColor，导体是0.96xBaseColor）</h3><img src="/2025/03/20/Games202-lecture5/image14.png" class=""><h3 id="计算SplitSum的这两项是用蒙特卡洛采样预计算的"><a href="#计算SplitSum的这两项是用蒙特卡洛采样预计算的" class="headerlink" title="计算SplitSum的这两项是用蒙特卡洛采样预计算的"></a>计算SplitSum的这两项是用蒙特卡洛采样预计算的</h3>]]></content>
    
    
    <categories>
      
      <category>Computer Graphics</category>
      
      <category>Games 202</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Soft Shadow, Shadow, PBR</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记录Hexo与Github搭建个人博客</title>
    <link href="/2025/03/19/LearnUseHexo/"/>
    <url>/2025/03/19/LearnUseHexo/</url>
    
    <content type="html"><![CDATA[<p>这里主要记录搭建过程遇到的一些问题，具体步骤参考前两个引用的大神博客。两个博客都有详细的搭建步骤，我这里主要用的是第一个hexo搭建的，然后使用第二个教程重定向域名。</p><h2 id="Hexo-相关命令指南"><a href="#Hexo-相关命令指南" class="headerlink" title="Hexo 相关命令指南"></a>Hexo 相关命令指南</h2><ul><li>本地打包：<code>hexo g</code></li><li>本地启动：<code>hexo s</code></li><li>本地打包并推送到 Git(网络问题需要多次尝试)：<code>hexo g -d</code></li><li>创建新文章：<code>hexo new post 测试文章</code></li><li>创建自定义页：<code>hexo new page 新页</code></li><li>清除缓存：<code>hexo clean</code></li></ul><h2 id="出现的一点问题"><a href="#出现的一点问题" class="headerlink" title="出现的一点问题"></a>出现的一点问题</h2><h3 id="1-统计量不显示"><a href="#1-统计量不显示" class="headerlink" title="1.统计量不显示"></a>1.统计量不显示</h3><p>统计阅读量的这里需要添加server_url，貌似是只有中国地区需要</p><img src="/2025/03/19/LearnUseHexo/image1.png" class=""><p>server_url添加的是这个REST API</p><img src="/2025/03/19/LearnUseHexo/image2.png" class=""><h3 id="2-图片在本地MarkDown显示但是在Hexo上不显示"><a href="#2-图片在本地MarkDown显示但是在Hexo上不显示" class="headerlink" title="2.图片在本地MarkDown显示但是在Hexo上不显示"></a>2.图片在本地MarkDown显示但是在Hexo上不显示</h3><p>需要安装hexo-renderer-marked来解决</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">npm install hexo-renderer-marked --save<br></code></pre></td></tr></table></figure><h3 id="3-图片没有打包到Public中"><a href="#3-图片没有打包到Public中" class="headerlink" title="3. 图片没有打包到Public中"></a>3. 图片没有打包到Public中</h3><p>使用<code>hexo clean</code>清除缓存，然后再重新生成<code>hexo g</code></p><h3 id="4-域名文件CNAME重新生成会被删除"><a href="#4-域名文件CNAME重新生成会被删除" class="headerlink" title="4. 域名文件CNAME重新生成会被删除"></a>4. 域名文件CNAME重新生成会被删除</h3><p>CNAME文件是用来把新域名重载到username.github.io的，因为hexo上传会重新生成public目录，CNAME文件被删除会导致访问报错：<code>404 There is not a GitHub Pages site here</code><br>解决方式是把CNAME文件放到hexo-blog&#x2F;source目录，这样重新生成public目录就会带着CNAME文件了</p><blockquote><p><a href="https://blog.csdn.net/yaorongke/article/details/119089190">GitHub Pages + Hexo搭建个人博客网站，史上最全教程</a><br><a href="https://github.com/qiubaiying/qiubaiying.github.io/wiki/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B">博客搭建详细教程</a><br><a href="https://arcsin2.cloud/2023/02/23/Hexo-%E5%8D%9A%E5%AE%A2%E6%97%A0%E6%B3%95%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/">Hexo博客无法显示图片解决方法</a><br><a href="https://blog.csdn.net/qq_43000128/article/details/134348650">解决hexo图片无法显示问题</a></p></blockquote>]]></content>
    
    
    <categories>
      
      <category>网站</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Blog</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
